<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <title>&lt;dharpa-network-force> Demo</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="module" src="../../build/viz/network-force.js"></script>
    <style>
        body {
            margin: 2rem auto;
            height: 100%;
            overflow: hidden;
            max-width: 900px;
        }
    </style>
</head>

<body>
    <dharpa-network-force width="600" height="400" display-isolated-nodes />

    <script>
        const graph = document.querySelector('dharpa-network-force')
        const shortestPath = ['1','20','36']
        
        d3
            .csv("data/nodes.csv")
            .then(nodesCsv => nodesCsv.map(d => ({
                id: d.Id,
                label: d.LabelTrans,
                group: d.Language,
                scaler: d.eigenvector,
                // scaler: d.degree,
                // scaler: d.indegree,
                // scaler: d.betweenness,
            })))
            .then(nodes => { graph.nodes = nodes })

        d3
            .csv("data/edges.csv")
            .then(edgesCsv => edgesCsv.map(d => ({
                source: d.source,
                target: d.target,
                // value: d.value
            })))
            .then(edges => { graph.edges = edges })


        graph.addEventListener('node-clicked', ({ detail: node }) => {
            console.log('Node clicked', node)
            graph.shortestPath = graph.shortestPath.length > 0 ? [] : shortestPath
        })

    </script>
</body>

</html>